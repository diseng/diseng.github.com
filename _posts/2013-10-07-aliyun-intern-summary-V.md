---
layout: post
title : 阿里云实习阶段性小结(五)
category : work
tags : [work]
---
{% include JB/setup %}

最近这段时间，放假放的比较乱，所以到现在才开始写实习小结。

在这段时间里，自己独立做了一些小需求，在刘鸽和福贵不在的时候，负责跟进api可计费项目，还整理了云帐号的python脚本、云帐号的UI自动化，并且学习整理了常用压测工具和性能优化工具的使用。

回顾这段时间的工作，有几个点感触还是比较深的。

不要做重复的工作。虽然测试脚本的编写，为了便于更改和debug，常常写的比较简单明了，将一些测试点的数据暴露在代码中，无须进行封装和安全上的处理，但是这样的做法不能放到测试框架/工具的编写上。测试框架/工具需要从另外的方面进行编写，首先测试框架/工具的目的是为了简化和便利测试工作，其次测试框架/工具不会用来部署到生产环境，只是供内部人员使用，因此在测试框架/工具的编写上，可以使用一些不常用的编码技巧或者语言特性，这有可能使得测试框架/工具在扩展性和可维护性上做的不是很好，但是测试工具/框架并不是企业软件，不需要进行很长时间的维护和更新，而这样做可以使得测试工作进行的更加高效。所以，在测试过程中的一些重复的事情，应该放到测试框架/工具中去，测试脚本应该关注的只是数据的输入和输出是否满足期望。

不要做假定，编写灵活的脚本。分层测试中，我们常常只关注自己负责的这一层，在编写测试脚本时常常假定上一层是正确的，或者假定某些地方是没有改动不会产生变化的，而运行脚本报错时，却又常常怀疑是上一层的问题，我们不能依靠假定，我们能够依靠的是测试脚本运行出来的结果。当我们遇到一个bug时，除了给出缺陷或者进行修正以外，我们还需要确定以前为什么没有找出这个bug，我们是否需要对单元测试、功能测试或其他测试进行改进，以让它们有能力找出这个bug。如果修改测试脚本需要很长的时间，那么就要考虑如何编写更加灵活可改的测试脚本了。

及时ci代码。在做小需求的时候，可能只有一个人负责这个项目，因此不及时ci代码，并不会产生什么影响，但是当一个较大的项目，需要几个人共同测试时，及时ci代码就会显得比较重要。一是较大的项目可能更需要做持续集成测试，如果不及时ci代码，那么你编写的错误脚本可能会一直错误下去，直到你或者别人去修改测试脚本，而集成测试通常每天都会运行；二是当别人的代码有所依赖你的代码时，及时ci代码可以更早的发现问题，不要等到新增或者修改了几十个文件的时候才进行ci，到那个时候，人们需要花费额外的时间再去熟悉代码。

了解项目代码。关注项目的业务逻辑，可以使我们完成更好的TC设计，而了解项目代码，则可以使我们更好的进行测试脚本的编写，当然遇到问题也可以询问开发的同学，但是如果你了解项目代码，则可以省下一些交流的时间。在云帐号的UI脚本自动化测试维护中，有一个case始终通不过，后来查看源码才发现，在页面渲染中，有些字段无论是否有值都会进行页面显示，而有些字段则做了if判断，只有在有值时才进行显示，但是在测试脚本中则对所以字段都做了存在性校验。如果了解项目代码，可能就不会发生这个问题。

另外，这段时间学习整理了基本压测工具Jmeter、Java监控工具Jprofiler/visualvm/Jmap/MAT/Jconsole/Xming/Jstack/jstat/jinfo/vmstat/jconsole/netio.sh/dstat等、系统监控工具nmon、MySQL调优和监控（包括show status、定位slow query、执行计划explain、使用sql hint等），整理出的使用文档可以在[这里](http://pan.baidu.com/s/1pJuJ0pX)下载。

还跟着django官网的Tutorial学习了一下，发现django里面内置的测试库用来做接口测试、功能测试、集成测试也是非常方便的，也可以使用项目管理的manage.py进行自动化测试管理，下次再深入学习一下，尝试着可以用到以后的工作里去。

了解了一下groovy，一门JVM上的动态语言，拥有类似 Python、Ruby 和 Smalltalk 中的一些特性，可以作为 Java 平台的脚本语言使用。Groovy 的语法与 Java 非常相似，Groovy 代码动态的被编译器转换成 Java 字节码，由于其运行在 JVM 上的特性，Groovy 可以使用其他 Java 语言编写的库。

{% highlight java %}
class Foo {
  doSomething() {
    data = ["name": "James", "location": "London"]
    for (e in data) {
      println("entry ${e.key} is ${e.value}")
    }
  }
 
  closureExample(collection) {
    collection.each { println("value ${it}") }
  }
 
  static void main(args) {
    values = [1, 2, 3, "abc"]
    foo = new Foo()
    foo.closureExample(values)
    foo.doSomething()
  }
}
{% endhighlight %}

看上面这一段代码，是不是很简洁。groovy还是值得学习的，由于语法类似Java，所以学习成本并不会很高，用在开发或者测试上，效率应该是可以提高不少的。

最后，可能实习到这个月底，需要回学校去了。院辅导员通知10月下旬给出毕业设计的选题，然后11月份需要进行毕业设计的开题答辩。不知道11月的马拉松还能赶上不。。。另外，还没有吃上巧芬的金钱豹啊！


